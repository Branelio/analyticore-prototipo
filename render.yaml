services:
  # Servicio de Análisis (Python)
  - type: web
    name: analyticore-python
    env: python
    region: oregon
    plan: free
    dockerContext: ./python-service
    ports: 8000
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: analyticore-db
          property: connectionString
      - key: JAVA_SERVICE_URL
        fromService:
          name: analyticore-java
          property: httpsUri

  # Servicio de Análisis (Java)
  - type: web
    name: analyticore-java
    env: java
    region: oregon
    plan: free
    dockerContext: ./java-service/analysis-service # Ruta corregida según tu estructura
    dockerCommand: java -jar app.jar
    ports: 8080
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: analyticore-db
          property: connectionString

  # Frontend (React)
  - type: web
    name: analyticore-frontend
    env: static
    region: oregon
    plan: free
    dockerContext: ./frontend
    ports: 80
    envVars:
      - key: REACT_APP_API_BASE_URL
        fromService:
          name: analyticore-python
          property: httpsUri

  # Base de Datos (PostgreSQL)
  - type: database
    name: analyticore-db
    region: oregon
    plan: free
    databaseName: analyticore_db_fh10
    ipAllowList: [] # Puedes agregar tu IP si quieres conectar localmente